{"version":3,"sources":[".tmp/main.js"],"names":[],"mappings":"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","file":".tmp/main.js","sourcesContent":["navigator.getUserMedia = ( navigator.getUserMedia ||\n                           navigator.webkitGetUserMedia ||\n                           navigator.mozGetUserMedia ||\n                           navigator.msGetUserMedia);\n{\n  let factory = PanelFactory({items: []});\n  var panel = React.render(factory, document.getElementById('panel'));\n  panel.setState({\n    itemsStatus: []\n  });\n}\n{\n  let factory = PropertiesFactory();\n  var properties = React.render(factory, document.getElementById('properties'));\n}\nvar audioContext = new (window.AudioContext || window.webkitAudioContext)();\nvar analyser = audioContext.createAnalyser();\n\n$('#add-oscillator').click(e => {\n  let oscillator = audioContext.createOscillator(),\n      gain = audioContext.createGain();\n\n  let types = ['sine','square',\n               'sawtooth','triangle'];\n\n  let newLine = {\n    name: 'Oscillator ' + (panel.props.items.length + 1),\n    oscillator: oscillator,\n    gain: gain,\n    connected: false,\n    properties: {\n      set frequency(value) {\n        if(typeof value !== 'number') return;\n        \n        oscillator.frequency.value = value;\n      },\n      get frequency() {\n        return oscillator.frequency.value;\n      },\n      set detune(value) {\n        if(typeof value !== 'number') return;\n\n        oscillator.detune.value = value;\n      },\n      get detune() {\n        return oscillator.detune.value;\n      },\n      set type(value) {\n        if(!types.includes(value)) return;\n\n        oscillator.type = value;\n      },\n      get type() {\n        return oscillator.type;\n      },\n      set volume(value) {\n        if(typeof value !== 'number') return;\n\n        gain.gain.value = value / 100;\n      },\n      get volume() {\n        return parseInt(Math.round(gain.gain.value * 100));\n      },\n      types: {\n        frequency: {\n          type: 'number',\n        },\n        detune: {\n          type: 'number',\n        },\n        type: {\n          type: 'select',\n          options: types\n        },\n        volume: {\n          type: 'number'\n        }\n      }\n    },\n\n  };\n\n  oscillator.start();\n  oscillator.connect(gain);\n\n  panel.setState({\n    itemsStatus: panel.state.itemsStatus.concat(false)\n  });\n  panel.setProps({\n    items: panel.props.items.concat(newLine)\n  });\n});\n\n$('#add-stream').click(e => {\n  navigator.getUserMedia({audio: true}, stream => {\n    let stream = audioContext.createMediaStreamSource(stream),\n        gain = audioContext.createGain();\n\n    let newLine = {\n      name: 'Line In ' + (panel.props.items.length + 1),\n      oscillator: stream,\n      gain: gain,\n      connected: false,\n      properties: {\n        set volume(value) {\n          if(typeof value !== 'number') return;\n\n          gain.gain.value = value / 100;\n        },\n        get volume() {\n          return parseInt(Math.round(gain.gain.value * 100));\n        },\n        types: {\n          volume: {\n            type: 'number'\n          }\n        }\n      }\n    };\n\n    stream.connect(gain);\n\n    panel.setState({\n      itemsStatus: panel.state.itemsStatus.concat(false)\n    });\n    panel.setProps({\n      items: panel.props.items.concat(newLine)\n    });\n  }, e => {});\n});\nlet $canvas = $('#wave-canvas'),\n    $wave = $('#wave');\n\nlet canvas = $canvas.get(0).getContext('2d');\n\nlet stop = false;\n\nfunction drawWave() {\n  let bufferLength = analyser.fftSize;\n  let data = new Float32Array(bufferLength);\n\n  let WIDTH, HEIGHT, SIDE_MARGIN,\n        width, canvasWidth, canvasHeight;\n\n  function setSizes() {\n    WIDTH = $canvas.width() * 0.8;\n    HEIGHT = $canvas.height() * 0.6;\n\n    SIDE_MARGIN = $canvas.width() * 0.2;\n    width = WIDTH * (1.0/bufferLength);\n\n    canvasWidth = $canvas.width();\n    canvasHeight = $canvas.height();\n  }\n\n  setSizes();\n  $(window).resize(setSizes);\n\n\n  (function loop() {\n    if(stop) return;\n    requestAnimationFrame(function() {\n      analyser.getFloatTimeDomainData(data);\n\n      canvas.clearRect(0, 0, canvasWidth, canvasHeight);\n      canvas.strokeStyle = '#D51A00';\n      canvas.fillStyle = '#D51A00';\n      canvas.beginPath();\n\n      let x = SIDE_MARGIN/2;\n\n      for(let i = 0; i < bufferLength; i++) {\n        let value = data[i] * HEIGHT / 2;\n\n        // canvas.fillStyle = 'rgb('+(value);\n        canvas.rect(x, HEIGHT - value/2, width, value);\n\n        x += width;\n      }\n\n      canvas.fill();\n\n      loop();\n    });\n  })();\n}\n\nconst map = (a, oldMin, oldMax, min, max) => {\n  return (a - oldMin)/(oldMax-oldMin) * (max-min) + min;\n};\n\n\n$canvas.attr('width', $wave.width());\n$canvas.attr('height', $wave.height());\n$(window).resize(function() {\n  $canvas.attr('width', $wave.width());\n  $canvas.attr('height', $wave.height());\n});\n\ndrawWave();\n"]}