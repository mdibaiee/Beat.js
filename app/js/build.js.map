{"version":3,"sources":[".tmp/main.js"],"names":[],"mappings":"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","file":".tmp/main.js","sourcesContent":["navigator.getUserMedia = ( navigator.getUserMedia ||\n                           navigator.webkitGetUserMedia ||\n                           navigator.mozGetUserMedia ||\n                           navigator.msGetUserMedia);\n(function(global) {\n  function initTimelapses() {\n    let $panel = $('#panel');\n    let $timelapses = $('[id^=\"i-\"]');\n\n    const width = $panel.width() * 0.8;\n    const height = 30;\n    const distance = width / 101;\n\n    $timelapses.each(function(e) {\n      this.width = width;\n      this.height = height;\n\n      let id = this.id.slice(2);\n      let item = panel.props.items[+id];\n\n      let c = this.getContext('2d');\n      c.clearRect(0, 0, width, height);\n      c.fillStyle = 'white';\n\n      c.beginPath();\n      for(let i = 0; i <= 100; i++) {\n        let h = i % 10 === 0 ? 20 : 10;\n        c.rect(i*distance, height-h, 2, h);\n      }\n\n      c.fill();\n      c.closePath();\n\n      c.fillStyle = 'rgba(255, 110, 110, 0.6)';\n\n      for(let i = 0, len = item.range.length; i < len; i++) {\n        let [start, end] = item.range.slice(i, i+2);\n        if(typeof end === 'undefined' || typeof start === 'undefined') continue;\n        start *= width;\n        end *= width;\n\n        c.beginPath();\n        c.rect(start, 0, end - start, 30);\n        c.stroke();\n        c.fill();\n        c.closePath();\n      }\n    });\n  }\n\n  $('.tools .fa-scissors').click(function() {\n    let $timelapses = $('[id^=\"i-\"]');\n\n    $timelapses.removeClass().addClass('cut');\n  });\n\n  $('.tools .fa-plus').click(function() {\n    let $timelapses = $('[id^=\"i-\"]');\n\n    $timelapses.removeClass().addClass('add');\n  });\n\n  $('.tools .fa-compress').click(function() {\n    let $timelapses = $('[id^=\"i-\"]');\n\n    $timelapses.removeClass().addClass('merge');\n  });\n\n  $('.tools .fa-trash-o').click(function() {\n    let $timelapses = $('[id^=\"i-\"]');\n\n    $timelapses.removeClass().addClass('delete');\n  });\n\n  global.initTimelapses = initTimelapses;\n})(window);\n\n{\n  let factory = PanelFactory({items: []});\n  var panel = React.render(factory, document.getElementById('panel'));\n  panel.setState({\n    itemsStatus: []\n  });\n}\n{\n  let factory = PropertiesFactory();\n  var properties = React.render(factory, document.getElementById('properties'));\n}\n\n(function(global) {\n  var audioContext = new (window.AudioContext || window.webkitAudioContext)();\n  var analyser = audioContext.createAnalyser();\n\n  $('#add-oscillator').click(e => {\n    let oscillator = audioContext.createOscillator(),\n        gain = audioContext.createGain();\n\n    let types = ['sine','square',\n                 'sawtooth','triangle'];\n\n    let newLine = {\n      name: 'Oscillator ' + (panel.props.items.length + 1),\n      oscillator: oscillator,\n      gain: gain,\n      connected: false,\n      range: [0, 1],\n      properties: {\n        set frequency(value) {\n          if(typeof value !== 'number') return;\n          \n          oscillator.frequency.value = value;\n        },\n        get frequency() {\n          return oscillator.frequency.value;\n        },\n        set detune(value) {\n          if(typeof value !== 'number') return;\n\n          oscillator.detune.value = value;\n        },\n        get detune() {\n          return oscillator.detune.value;\n        },\n        set type(value) {\n          if(!types.includes(value)) return;\n\n          oscillator.type = value;\n        },\n        get type() {\n          return oscillator.type;\n        },\n        set volume(value) {\n          if(typeof value !== 'number') return;\n\n          gain.gain.value = value / 100;\n        },\n        get volume() {\n          return parseInt(Math.round(gain.gain.value * 100));\n        },\n        types: {\n          frequency: {\n            type: 'number',\n          },\n          detune: {\n            type: 'number',\n          },\n          type: {\n            type: 'select',\n            options: types\n          },\n          volume: {\n            type: 'number'\n          }\n        }\n      },\n\n    };\n\n    oscillator.start();\n    oscillator.connect(gain);\n\n    panel.setState({\n      itemsStatus: panel.state.itemsStatus.concat(false)\n    });\n    panel.setProps({\n      items: panel.props.items.concat(newLine)\n    });\n  });\n\n  $('#add-stream').click(e => {\n    navigator.getUserMedia({audio: true}, stream => {\n      let stream = audioContext.createMediaStreamSource(stream),\n          gain = audioContext.createGain();\n\n      let newLine = {\n        name: 'Line In ' + (panel.props.items.length + 1),\n        oscillator: stream,\n        gain: gain,\n        connected: false,\n        range: [0, 1],\n        properties: {\n          set volume(value) {\n            if(typeof value !== 'number') return;\n\n            gain.gain.value = value / 100;\n          },\n          get volume() {\n            return parseInt(Math.round(gain.gain.value * 100));\n          },\n          types: {\n            volume: {\n              type: 'number'\n            }\n          }\n        }\n      };\n\n      stream.connect(gain);\n\n      panel.setState({\n        itemsStatus: panel.state.itemsStatus.concat(false)\n      });\n      panel.setProps({\n        items: panel.props.items.concat(newLine)\n      });\n    }, e => {});\n  });\n\n  global.audioContext = audioContext;\n  global.analyser = analyser;\n})(window);\n\n(function(global) {\n  let $canvas = $('#wave-canvas'),\n      $wave = $('#wave');\n\n  let canvas = $canvas.get(0).getContext('2d');\n\n  let stop = false;\n\n  function stopWave() {\n     stop = true;\n  }\n\n  function drawWave() {\n    let bufferLength = analyser.fftSize;\n    let data = new Float32Array(bufferLength);\n\n    let WIDTH, HEIGHT, SIDE_MARGIN,\n          width, canvasWidth, canvasHeight;\n\n    function setSizes() {\n      WIDTH = $canvas.width() * 0.8;\n      HEIGHT = $canvas.height() * 0.6;\n\n      SIDE_MARGIN = $canvas.width() * 0.2;\n      width = WIDTH * (1.0/bufferLength);\n\n      canvasWidth = $canvas.width();\n      canvasHeight = $canvas.height();\n    }\n\n    setSizes();\n    $(window).resize(setSizes);\n\n\n    (function loop() {\n      if(stop) {\n        stop = false;\n        return;\n      }\n      requestAnimationFrame(function() {\n        analyser.getFloatTimeDomainData(data);\n\n        canvas.clearRect(0, 0, canvasWidth, canvasHeight);\n        canvas.strokeStyle = '#D51A00';\n        canvas.fillStyle = '#D51A00';\n        canvas.beginPath();\n\n        let x = SIDE_MARGIN/2;\n\n        for(let i = 0; i < bufferLength; i++) {\n          let value = data[i] * HEIGHT / 2;\n\n          canvas.rect(x, HEIGHT*0.7 - value/2, width, value);\n\n          x += width;\n        }\n\n        canvas.fill();\n\n        loop();\n      });\n    })();\n  }\n\n\n  $canvas.attr('width', $wave.width());\n  $canvas.attr('height', $wave.height());\n  $(window).resize(function() {\n    $canvas.attr('width', $wave.width());\n    $canvas.attr('height', $wave.height());\n  });\n\n  global.drawWave = drawWave;\n  global.stopWave = stopWave;\n})(window);\n\n(function(global) {\n  let timeouts = [];\n\n  let status = 0;\n\n  const DURATION = 10*1000;\n\n  function play() {\n    let items = panel.props.items;\n\n    let hasOn = items.some(function(a) {\n      return a.connected;\n    });\n\n    if(status === 1 || !items.length || !hasOn) return;\n    timeouts = [];\n    status = 1;\n\n    analyser.connect(audioContext.destination);\n    drawWave();\n\n    for(let item of items) {\n      if(!item.connected) continue;\n      let range = item.range;\n\n      for(let i = 0, len = range.length; i < len; i+=2) {\n        if(typeof range[i] === 'undefined') {\n          i--;\n          continue;\n        }\n\n        let pair = range.slice(i, i+2);\n        timeouts.push(\n          setTimeout(() => {\n            item.gain.connect(analyser);\n          }, pair[0]*DURATION),\n          setTimeout(() => {\n            item.gain.disconnect(analyser);\n          }, pair[1]*DURATION)\n        );\n      }\n    }\n\n    timeouts.push(setTimeout(() => {\n      stop();\n      play();\n    }, DURATION));\n  }\n\n  function stop() {\n    if(status === 0) return;\n    analyser.disconnect(audioContext.destination);\n    stopWave();\n    for(let t of timeouts) {\n      clearTimeout(t);\n    }\n    timeouts = [];\n    status = 0;\n  }\n\n\n  $('#play').click(play);\n  $('#stop').click(stop);\n})(window);\n"]}