{"version":3,"sources":[".tmp/views.js"],"names":[],"mappings":"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","file":".tmp/views.js","sourcesContent":["var PanelView = React.createClass({displayName: \"PanelView\",\n  toggleConnect(index) {\n    let item = this.props.items[index];\n\n    item.connected = !item.connected;\n\n    this.state.itemsStatus[index] = item.connected;\n\n    this.setState({\n      itemsStatus: this.state.itemsStatus\n    });\n  },\n  showProps(index) {\n    let item = this.props.items[index];\n    properties.setProps({item: item.properties, name: item.name});\n  },\n  names() {\n    return this.props.items.map((item, index) => {\n      return React.createElement(\"li\", {key: index, \n                 onClick: this.showProps.bind(this, index)}, \n        React.createElement(\"span\", {className: this.state.itemsStatus[index] ? 'fa fa-dot-circle-o' : 'fa fa-circle-o', \n              onClick: this.toggleConnect.bind(this, index)}), \n        item.name\n      )\n    });\n  },\n  timelapses() {\n    return this.props.items.map((item, index) => {\n      return React.createElement(\"canvas\", {id: 'i-'+index, key: index, \n              onClick: this.timelapseAction.bind(this, index), \n              onMouseMove: this.showRange.bind(this, index)});\n    });\n  },\n  timelapseAction(index, e) {\n    let item = this.props.items[index];\n\n    let $el = $('#i-'+index),\n        cls = $el.attr('class');\n\n    let width = $el.width();\n    let n = map(e.pageX - $el.offset().left, 0, width, 0, 1);\n\n    let ind = 0;\n\n    let before = item.range.reduce((a, b, i) => {\n      return b >= a && b < n ? (ind = i, b) : a;\n    }, -Infinity);\n\n    if(cls === 'cut') {\n      item.range.splice(ind, 1, before, n);\n    }\n    if(cls === 'delete') {\n      item.range.splice(ind, 1, before, undefined);\n    }\n    if(cls === 'merge') {\n      console.log(item.range, ind);\n      if(item.range[ind+1] !== undefined) return;\n      item.range.splice(ind, 3);\n    }\n    if(cls === 'add') {\n      if(item.range[ind+1] !== undefined) return;\n\n      if(!this.state.firstAdd) {\n        this.state.firstAdd = n;\n        return;\n      }\n      item.range.splice(ind+1, 1, undefined, this.state.firstAdd, n, undefined);\n      this.state.firstAdd = false;\n    }\n\n    initTimelapses();\n  },\n  showRange(index, e) {\n    if(!this.state.firstAdd) return;\n\n    let $canvas = document.getElementById('i-'+index);\n    let c = $canvas.getContext('2d');\n\n    initTimelapses();\n    c.fillStyle = '#6E0201';\n    let start = this.state.firstAdd*$canvas.width,\n        end = e.pageX - $canvas.offsetLeft - start;\n\n    c.fillRect(start, 0, end, 30);\n  },\n  componentDidUpdate() {\n    initTimelapses();\n  },\n  componentDidMount() {\n    let $panel = $('#panel');\n\n    $panel.on('mousemove', 'canvas', (e) => {\n      let $canvas = $(e.target);\n      let width = $canvas.width();\n      let offset = $canvas.offset();\n      let toten = map(e.pageX, offset.left, offset.left+width, 0, 10).toFixed(1);\n\n      $canvas.tooltip(toten, {\n        x: e.pageX,\n        y: offset.top + $canvas.height()\n      });\n    });\n    $panel.on('mouseout', 'canvas', e => {\n      jQuery.fn.tooltip(false);\n    })\n  },\n  render() {\n    return React.createElement(\"div\", null, \n      React.createElement(\"ul\", {className: \"names\"}, \n        this.names()\n      ), \n      React.createElement(\"ul\", {className: \"timelapse\"}, \n        this.timelapses()\n      )\n    );\n  }\n});\n\nvar PanelFactory = React.createFactory(PanelView);\nvar PropertiesView = React.createClass({displayName: \"PropertiesView\",\n  updateProp(prop) {\n    let el = this.refs[prop].getDOMNode();\n    let item = this.props.item;\n    item[prop] = parseInt(el.value, 10) || el.value;\n\n    this.setProps({\n      item: item\n    })\n  },\n  input(prop) {\n    let value = this.props.item[prop];\n    let type = this.props.item.types[prop];\n    if(type.type === 'select') {\n      return React.createElement(\"select\", {value: value, ref: prop, onChange: this.updateProp.bind(this, prop)}, \n        type.options.map(opt => {\n          return React.createElement(\"option\", {value: opt}, opt)\n        })\n      );\n    } else {\n      return React.createElement(\"input\", {value: value, ref: prop, type: type.type, onChange: this.updateProp.bind(this, prop)})\n    }\n  },\n  propertyList() {\n    let els = [];\n    for(let prop in this.props.item) {\n      if(prop === 'types') continue;\n      els.push(\n        React.createElement(\"li\", {key: prop}, \n          React.createElement(\"span\", null, prop), \n          this.input(prop)\n        )\n      );\n    }\n    return els;\n  },\n  render() {\n    if(!this.props.item) return React.createElement(\"span\", null);\n    return React.createElement(\"ul\", {className: \"properties\"}, \n      React.createElement(\"p\", null, this.props.name, \" Properties\"), \n      this.propertyList()\n    )\n  }\n});\n\nvar PropertiesFactory = React.createFactory(PropertiesView);"]}